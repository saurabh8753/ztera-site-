<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>ZTERA â€“ TeraBox Video Player & Downloader (HD Online Player)</title>

<!-- â­ Favicon -->
<link rel="icon" type="image/png" href="/icon.png" />

<!-- â­ PWA Manifest -->
<link rel="manifest" href="/manifest.json">

<!-- iOS Support -->
<meta name="apple-mobile-web-app-capable" content="yes">
<link rel="apple-touch-icon" href="/icon.png">

<style>
.installBox{
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: #4F46E5;
  color: white;
  padding: 14px 24px;
  border-radius: 16px;
  font-size: 18px;
  font-weight: 700;
  display: none;
  box-shadow: 0 6px 18px rgba(0,0,0,0.25);
  cursor:pointer;
}
</style>
</head>

<body>

<!-- â­ INSTALL POPUP -->
<div id="installBox" class="installBox">ðŸ“¥ Install ZTERA App</div>

<script>
let deferredPrompt;

// Browser triggers event ONE time â†’ Save it for later
window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;

    // Always show popup
    showInstallPopup();
});

// Show popup always
function showInstallPopup() {
    const box = document.getElementById("installBox");
    box.style.display = "block";

    box.onclick = async () => {
        if (deferredPrompt) {
            deferredPrompt.prompt();
            const choice = await deferredPrompt.userChoice;

            // Reset so popup can reappear
            deferredPrompt = null;

            // Show popup again after delay
            setTimeout(showInstallPopup, 15000);
        }
    };
}

// If user dismiss popup â†’ show again after 15 sec
setInterval(()=>{
    if (!window.matchMedia('(display-mode: standalone)').matches) {
        if (!deferredPrompt) return;  
        showInstallPopup();
    }
},15000);

// Register Service Worker
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/sw.js");
}
</script>

</body>
</html>
